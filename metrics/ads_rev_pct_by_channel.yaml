metric:
  name: Ads Rev Pct by Channel
  aliases: ["ads revenue ratio by channel", "广告收入占比按渠道", "ads rev% by channel",
            "search ads ratio", "DD ads ratio"]
  tags: [revenue, ads, efficiency]
  type: complex
  aggregation_template: avg_rollup
  sources:
    - id: ads_rev_by_channel
      layer: dws
      table: mp_paidads.ads_advertise_take_rate_v2_1d__reg_s0_live
      golden: true
      snippet: snippets/layer1/ads_rev_by_channel.sql
      columns:
        value: ads_rev_usd
        date: grass_date
        region: grass_region
      filters:
        - "tz_type = 'regional'"
  sub_metrics:
    - search_ads_rev_ratio
    - dd_ads_rev_ratio
    - rcmd_ads_rev_ratio
    - game_ads_rev_ratio
    - brand_ads_rev_ratio
    - live_ads_rev_ratio
    - video_ads_rev_ratio
    - undefined_rev_ratio
  unit: ratio
  dimensions:
    required: [market, date_range]
    optional: []
